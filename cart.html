<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>G-FASHION | Cart</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700;800&family=Playfair+Display:wght@700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
  <style>
    :root { --bg:#f6f1ea; --card:#fff; --ink:#111; --muted:#6a7280; --line:#e8dfd4; --brand:#be4a1e; --brand2:#7d2f14; --wrap:min(1120px,92vw); }
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:"Outfit",sans-serif;background:radial-gradient(circle at 10% 10%,#ffe2c4,transparent 35%),var(--bg);color:var(--ink)}
    a{text-decoration:none;color:inherit}
    .wrap{width:var(--wrap);margin:auto}
    .top{font-size:.9rem;color:var(--muted);border-bottom:1px solid var(--line)}
    .top .wrap{display:flex;justify-content:space-between;gap:1rem;flex-wrap:wrap;padding:.55rem 0}
    header{position:sticky;top:0;z-index:20;background:#f6f1eadd;backdrop-filter:blur(8px);border-bottom:1px solid var(--line)}
    .nav{display:grid;grid-template-columns:auto 1fr auto;align-items:center;gap:1rem;padding:.9rem 0}
    .logo{font-family:"Playfair Display",serif;font-size:1.6rem}.logo span{color:var(--brand)}
    .links{display:flex;justify-content:center;gap:1.1rem;list-style:none}
    .links a{font-weight:600;color:#28303d}
    .actions{display:flex;gap:.55rem;align-items:center}
    .btn-icon{width:40px;height:40px;border:1px solid var(--line);background:#fff;border-radius:11px;display:grid;place-items:center;cursor:pointer}
    .cart{padding:0 .8rem;height:40px;border:1px solid var(--line);background:#fff;border-radius:11px;display:flex;align-items:center;gap:.45rem;font-weight:700}
    .menu{display:none}

    .hero{padding:2rem 0 1rem}
    .hero-card{background:linear-gradient(160deg,#fff,#ffe9d6);border:1px solid #f2d4bc;border-radius:22px;padding:1rem;display:grid;grid-template-columns:1fr auto;align-items:center;gap:1rem}
    .chip{display:inline-flex;gap:.4rem;padding:.4rem .8rem;border-radius:999px;background:#fff3e7;border:1px solid #f2cfb4;color:#7d2f14;font-weight:700;font-size:.86rem}
    h1{font-family:"Playfair Display",serif;font-size:clamp(1.8rem,4vw,3rem);line-height:1.05;margin:.8rem 0}
    .lead{color:var(--muted)}
    .hero-card img{width:220px;max-width:40vw;object-fit:contain}

    .cart-layout{display:grid;grid-template-columns:1.5fr .8fr;gap:1rem;padding-bottom:2rem}
    .panel{background:#fff;border:1px solid var(--line);border-radius:16px;overflow:hidden}
    .row{display:grid;grid-template-columns:1.6fr .6fr .6fr .6fr;gap:.6rem;padding:.9rem 1rem;align-items:center;border-bottom:1px solid var(--line)}
    .row.head{font-weight:700;background:#fcfaf7}
    .prod{display:flex;align-items:center;gap:.7rem}
    .prod img{width:64px;height:64px;border-radius:10px;background:#faf6f1;object-fit:contain;padding:6px}
    .muted{color:var(--muted);font-size:.92rem}
    .qty{height:38px;width:82px;border:1px solid var(--line);border-radius:10px;padding:0 .5rem}
    .remove-btn{border:0;background:transparent;color:#b42318;font-weight:700;cursor:pointer;padding:0}
    .empty{padding:1rem;color:var(--muted)}
    .summary{padding:1rem}
    .summary h3{font-family:"Playfair Display",serif;margin-bottom:.8rem}
    .sum-line{display:flex;justify-content:space-between;padding:.55rem 0;color:#374151}
    .promo{display:flex;gap:.45rem;margin:.6rem 0}
    .promo input{flex:1;height:40px;border:1px solid var(--line);border-radius:10px;padding:0 .7rem}
    .promo button{height:40px;border:0;border-radius:10px;background:#111827;color:#fff;padding:0 .8rem;cursor:pointer}
    .sum-total{display:flex;justify-content:space-between;padding:.8rem 0;margin-top:.3rem;border-top:1px solid var(--line);font-weight:800;font-size:1.12rem}
    .btn{height:44px;width:100%;border-radius:12px;border:0;cursor:pointer;font-weight:700}
    .btn-primary{color:#fff;background:linear-gradient(135deg,var(--brand),var(--brand2));margin-top:.8rem}
    .btn-light{background:#fff;border:1px solid var(--line);margin-top:.55rem}
    .pay-modal{position:fixed;inset:0;display:none;place-items:center;background:#0a0a0db8;padding:1rem;z-index:80}
    .pay-modal.open{display:grid}
    .pay-card{width:min(760px,95vw);background:#fff;border-radius:16px;padding:1rem;border:1px solid var(--line);position:relative}
    .pay-close{position:absolute;right:.8rem;top:.8rem;width:34px;height:34px;border:1px solid var(--line);border-radius:10px;background:#fff;cursor:pointer}
    .pay-grid{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:.6rem;margin:.8rem 0}
    .pay-item{border:1px solid var(--line);border-radius:12px;padding:.75rem;display:flex;gap:.45rem;align-items:center}
    .pay-item input{accent-color:var(--brand)}

    footer{margin-top:1.2rem;padding:1.3rem 0 2rem;border-top:1px solid var(--line);color:var(--muted)}
    .fgrid{display:grid;grid-template-columns:2fr 1fr 1fr;gap:1rem}

    @media (max-width:980px){.cart-layout,.fgrid,.pay-grid{grid-template-columns:1fr 1fr}}
    @media (max-width:760px){
      .nav{grid-template-columns:auto auto;justify-content:space-between}.menu{display:grid}
      .links{position:fixed;top:84px;left:0;right:0;background:#fffffff2;border-top:1px solid var(--line);border-bottom:1px solid var(--line);padding:.9rem;flex-direction:column;align-items:start;transform:scaleY(0);transform-origin:top;transition:.2s}
      .links.open{transform:scaleY(1)}
      .hero-card,.pay-grid{grid-template-columns:1fr}
      .row{grid-template-columns:1fr;gap:.35rem}
      .row.head{display:none}
      .top .wrap{justify-content:center}
    }
  </style>
</head>
<body>
  <div class="top"><div class="wrap"><p><i class="fa-solid fa-truck-fast"></i> Free shipping over $120</p><p><i class="fa-solid fa-shield-halved"></i> Secure checkout</p></div></div>
  <header>
    <div class="wrap nav">
      <a href="index.html" class="logo">G-<span>Fashion</span></a>
      <ul class="links" id="links"><li><a href="index.html">Home</a></li><li><a href="products.html">Products</a></li><li><a href="cart.html">Cart</a></li><li><a href="#footer">Contact</a></li></ul>
      <div class="actions">
        <a class="cart" href="cart.html"><i class="fa-solid fa-cart-shopping"></i> <span id="cartCount">0</span></a>
        <button class="btn-icon menu" id="menu"><i class="fa-solid fa-bars"></i></button>
      </div>
    </div>
  </header>

  <main class="wrap">
    <section class="hero">
      <div class="hero-card">
        <div>
          <span class="chip"><i class="fa-solid fa-cart-shopping"></i> Checkout Ready</span>
          <h1>Your cart in the same premium layout.</h1>
          <p class="lead">Updated to match the homepage style and responsiveness.</p>
        </div>
        <img src="img/caps/images__20_-removebg-preview.png" alt="cart" />
      </div>
    </section>

    <section class="cart-layout">
      <div class="panel">
        <div class="row head"><div>Product</div><div>Price</div><div>Qty</div><div>Total</div></div>
        <div id="cartRows"></div>
      </div>

      <aside class="panel summary">
        <h3>Order Summary</h3>
        <div class="promo"><input id="promoCode" placeholder="Promo code (FLASH15)" /><button id="applyPromoBtn">Apply</button></div>
        <div class="sum-line"><span>Subtotal</span><span id="sumSubtotal">$0.00</span></div>
        <div class="sum-line"><span>Discount</span><span id="sumDiscount">-$0.00</span></div>
        <div class="sum-line"><span>Shipping</span><span id="sumShipping">$0.00</span></div>
        <div class="sum-line"><span>Tax</span><span id="sumTax">$0.00</span></div>
        <div class="sum-total"><span>Total</span><span id="sumTotal">$0.00</span></div>
        <button class="btn btn-primary" id="payNowBtn">Proceed With Payment</button>
        <a href="products.html"><button class="btn btn-light">Continue Shopping</button></a>
        <button class="btn btn-light" id="clearCartBtn">Clear Cart</button>
      </aside>
    </section>
  </main>

  <footer id="footer"><div class="wrap fgrid"><div><h3 class="logo">G-<span>Fashion</span></h3><p>Global Village Room 58 & 06, Gweru</p></div><div><h4>Shop</h4><p><a href="index.html">Home</a></p><p><a href="products.html">Products</a></p><p><a href="cart.html">Cart</a></p></div><div><h4>Contact</h4><p>+263 78 404 0311</p><p>gfashion@gmail.com</p></div></div></footer>
  <div class="pay-modal" id="payModal">
    <div class="pay-card">
      <button class="pay-close" id="payClose"><i class="fa-solid fa-xmark"></i></button>
      <h3>Select Payment Method</h3>
      <p class="lead">Choose your preferred option to continue securely.</p>
      <div class="pay-grid">
        <label class="pay-item"><input type="radio" name="pay" value="Mastercard" checked /> <i class="fa-brands fa-cc-mastercard"></i> Mastercard</label>
        <label class="pay-item"><input type="radio" name="pay" value="Visa" /> <i class="fa-brands fa-cc-visa"></i> Visa</label>
        <label class="pay-item"><input type="radio" name="pay" value="PayPal" /> <i class="fa-brands fa-paypal"></i> PayPal</label>
        <label class="pay-item"><input type="radio" name="pay" value="M-Pesa" /> <i class="fa-solid fa-mobile-screen-button"></i> M-Pesa</label>
        <label class="pay-item"><input type="radio" name="pay" value="Mix by Yas" /> <i class="fa-solid fa-wallet"></i> Mix by Yas</label>
        <label class="pay-item"><input type="radio" name="pay" value="Airtel Money" /> <i class="fa-solid fa-signal"></i> Airtel Money</label>
      </div>
      <button class="btn btn-primary" id="confirmPayBtn">Confirm Payment Method</button>
    </div>
  </div>

  <script>
    const CART_KEY = "gf_cart_v1";
    const cartCount = document.getElementById("cartCount");
    const cartRows = document.getElementById("cartRows");
    const sumSubtotal = document.getElementById("sumSubtotal");
    const sumDiscount = document.getElementById("sumDiscount");
    const sumShipping = document.getElementById("sumShipping");
    const sumTax = document.getElementById("sumTax");
    const sumTotal = document.getElementById("sumTotal");
    const promoCode = document.getElementById("promoCode");
    const applyPromoBtn = document.getElementById("applyPromoBtn");
    const clearCartBtn = document.getElementById("clearCartBtn");
    const payNowBtn = document.getElementById("payNowBtn");
    const payModal = document.getElementById("payModal");
    const payClose = document.getElementById("payClose");
    const confirmPayBtn = document.getElementById("confirmPayBtn");
    const menu = document.getElementById("menu");
    const links = document.getElementById("links");
    let promoPercent = 0;
    const promoMap = { FLASH15: 15, FASHION10: 10, VIP20: 20 };

    function money(value) {
      return "$" + value.toFixed(2);
    }

    function getCart() {
      try { return JSON.parse(localStorage.getItem(CART_KEY) || "[]"); }
      catch (_) { return []; }
    }

    function saveCart(items) {
      localStorage.setItem(CART_KEY, JSON.stringify(items));
      const totalQty = items.reduce((sum, item) => sum + item.qty, 0);
      localStorage.setItem("gf_cart_count", String(totalQty));
      cartCount.textContent = String(totalQty);
    }

    function renderCart() {
      const items = getCart();
      if (!items.length) {
        cartRows.innerHTML = `<div class="empty">Your cart is empty. Add items from <a href="products.html"><b>Products</b></a>.</div>`;
      } else {
        cartRows.innerHTML = items.map((item) => `
          <div class="row">
            <div class="prod">
              <img src="${item.image}" alt="${item.name}" />
              <div>
                <b>${item.name}</b>
                <div><button class="remove-btn" data-remove="${item.id}">Remove</button></div>
              </div>
            </div>
            <div>${money(item.price)}</div>
            <div><input class="qty" type="number" min="1" value="${item.qty}" data-qty="${item.id}" /></div>
            <div>${money(item.price * item.qty)}</div>
          </div>
        `).join("");
      }

      const subtotal = items.reduce((sum, item) => sum + (item.price * item.qty), 0);
      const discount = subtotal * (promoPercent / 100);
      const shipping = subtotal > 120 || subtotal === 0 ? 0 : 9;
      const tax = (subtotal - discount) * 0.03;
      const total = subtotal - discount + shipping + tax;

      sumSubtotal.textContent = money(subtotal);
      sumDiscount.textContent = "-" + money(discount);
      sumShipping.textContent = money(shipping);
      sumTax.textContent = money(tax);
      sumTotal.textContent = money(total);
    }

    cartRows.addEventListener("input", (event) => {
      const id = Number(event.target.dataset.qty);
      if (!id) return;
      const qty = Math.max(1, Number(event.target.value) || 1);
      const items = getCart();
      const target = items.find((item) => item.id === id);
      if (!target) return;
      target.qty = qty;
      saveCart(items);
      renderCart();
    });

    cartRows.addEventListener("click", (event) => {
      const id = Number(event.target.dataset.remove);
      if (!id) return;
      const items = getCart().filter((item) => item.id !== id);
      saveCart(items);
      renderCart();
    });

    clearCartBtn.addEventListener("click", () => {
      saveCart([]);
      renderCart();
    });
    applyPromoBtn.addEventListener("click", () => {
      const code = promoCode.value.trim().toUpperCase();
      promoPercent = promoMap[code] || 0;
      if (!promoPercent && code) alert("Invalid promo code");
      if (promoPercent) alert("Promo applied: " + promoPercent + "% off");
      renderCart();
    });

    payNowBtn.addEventListener("click", () => {
      if (!getCart().length) {
        alert("Your cart is empty. Add products first.");
        return;
      }
      payModal.classList.add("open");
    });

    payClose.addEventListener("click", () => payModal.classList.remove("open"));
    payModal.addEventListener("click", (e) => { if (e.target === payModal) payModal.classList.remove("open"); });
    confirmPayBtn.addEventListener("click", () => {
      const selected = document.querySelector('input[name="pay"]:checked')?.value || "Payment";
      payModal.classList.remove("open");
      alert(selected + " selected. Next step: secure payment gateway.");
    });

    menu.addEventListener("click", () => links.classList.toggle("open"));
    document.querySelectorAll(".links a").forEach((a) => a.addEventListener("click", () => links.classList.remove("open")));

    saveCart(getCart());
    renderCart();
  </script>
</body>
</html>
